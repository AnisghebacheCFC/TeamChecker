<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insurance Team Search</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <div class="bug-report-icon">
            <a href="mailto:aghebache@cfc.com?subject=Bug%20Report&body=Hello%20Anis,%20the%20bug%20is%20as%20follows:">
                <img src="bug-icon.png" alt="Report a bug" title="Report a bug" class="bug-icon">
            </a>
        </div>
        <img src="cfc-logo.png" alt="CFC Underwriting Logo" class="logo">
    </div>
    <div id="policyContainer" class="container">
        <h1>Policy Number Check</h1>
        <input type="text" id="policyNumber" placeholder="Enter policy number">
        <div id="policyResultBox"></div>
    </div>
    
    <!-- New Email Subject Analyzer Section -->
    <div class="container" id="analyzerContainer">
        <h1>Email Subject Analyzer</h1>
        <input type="text" id="emailSubject" placeholder="Enter email subject">
        <div class="center">
            <button id="analyzeButton">Analyze</button>
        </div>
        <div id="analyzeResult"></div>
    </div>
    
    <div class="container">
        <h1>Insurance Team Search</h1>
        <input type="text" id="searchBox" placeholder="Enter an activity">
        <div id="suggestions"></div>
        <div class="center">
            <button id="searchButton">Search</button>
        </div>
        <div id="resultBox"></div>
        <div id="listsWrapper">
            <div id="keywordsList" class="list"></div>
            <div id="avoidList" class="list"></div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById('analyzeButton').addEventListener('click', function() {
                const subject = document.getElementById('emailSubject').value.toLowerCase();
                const analyzeResult = document.getElementById('analyzeResult');
                
                // Clear previous results
                analyzeResult.innerHTML = '';

                const keywords = {
                    FinTech: ['fintech', 'blockchain', 'digital banking', 'mobile banking', 'investment platforms', 'money transfer', 'payment services', 'digital lending'],
                    Cyber: ['cybersecurity', 'data breach', 'cyber risk', 'incident response', 'cyber liability', 'privacy protection'],
                    LifeSciences: ['biotech', 'pharma', 'clinical trials', 'medical device', 'biotechnology', 'animal products', 'bio', 'biotics', 'blood bank', 'cannabis', 'cbd', 'drugs', 'hemp', 'laboratories', 'medical devices', 'nutra', 'pain relief', 'patients', 'research and development', 'research trials', 'stem cell bank', 'supplements', 'therapeutic devices', 'vitamins'],
                    IntellectualProperty: ['ip protection', 'patent', 'trademark', 'intellectual property', 'ip infringement', 'ip defense'],
                    ManagementLiability: ['directors and officers', 'd&o', 'executive risk', 'fiduciary', 'leadership coverage', 'crime'],
                    Media: ['media liability', 'content protection', 'digital media', 'media risk', 'libel and slander'],
                    ProductRecall: ['recall insurance', 'product safety', 'consumer protection', 'recall risk', 'supply chain', 'contamination', 'brand protection', 'ancillary product recall costs', 'product recall'],
                    Professions: ['professional liability', 'errors and omissions', 'e&o', 'professional indemnity', 'malpractice', 'business protection', 'agricultural consultants', 'business consultants', 'captives', 'civil engineers', 'commercial lines insurance', 'conservation managers', 'construction', 'conveyancers', 'data processors', 'directional drillers', 'drilling consultants', 'driving', 'haulage', 'education', 'electrical engineers', 'engineering', 'technical', 'environmental engineers', 'environmental consultants', 'estate agents', 'expert witnesses', 'feasibility studies', 'financial services', 'fire consultants', 'food consultants', 'foreclosure agents', 'geologists', 'geotechnical engineers', 'health and safety consultants', 'hospitality', 'hr consultants', 'hvac engineers', 'hydraulic', 'fire engineers', 'interim management', 'interior designers', 'investigators', 'it', 'telecommunications', 'land brokers', 'land surveyors', 'landscape architects', 'management consultants', 'mechanical engineers', 'other professional services', 'personal lines', 'project managers', 'property developers', 'property leasing firms', 'property management companies', 'property surveyors', 'quality assurance consultants', 'quarterly surveyors', 'recruitment', 'risk retention groups', 'staffing', 'structural architects', 'engineers', 'surveyors', 'town planning engineers', 'training companies']
                };

                let category = 'Nothing found';
                let foundKeywords = [];

                for (let key in keywords) {
                    keywords[key].forEach(keyword => {
                        if (subject.includes(keyword)) {
                            category = key;
                            foundKeywords.push(keyword);
                        }
                    });
                }

                analyzeResult.innerHTML = `Category: ${category}<br>Keywords Found: ${foundKeywords.length > 0 ? foundKeywords.join(', ') : 'None'}`;
            });
        });
    </script>
</body>
</html>
